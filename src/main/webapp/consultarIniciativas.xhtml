<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui">
	<h:head>
		<title>Banco de iniciativas ECI</title>
		<link href="assets/css/consultari.css" rel="stylesheet"/>
		<link  rel="icon"   href="assets/img/favicon.png" type="image/png" />
	</h:head>
	<body>
		<h:form id="busquedaUsuarioForm"> 
			<div class="cabecera">
				<img src= "assets/img/cabecera.jpg"/>
			</div>
			<div class = "header">
			<b>Consultar iniciativas</b>
				<ul class="nav">
					<li><a>Usuarios</a>
						<ul>
							<li><a href="../faces/consultarUsuarios.xhtml">Consultar usuarios</a></li>
						</ul>
					</li>
					<li><a href="">Iniciativas</a>
						<ul>
							<li><a href="">Consultar iniciativas</a></li>
						</ul>
					</li>
					<li>
						<p:commandButton value="Cerrar sesiÃ³n"
									class="btn btn-rose btn-simple btn-wd btn-lg"
									action="#{shiroBean.doLogOut()}"/>					
					</li>
				</ul>
			</div>
			<p:dataTable var="iniciativa" value="#{BancoPropuestasBean.consultarIniciativas()}" class="tabla"
				paginator="true" paginatorPosition = "bottom" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
				rows="10" selectionMode="single" id="correo" selection="#{BancoPropuestasBean.GetIniciativa()}"
				rowKey="#{iniciativa.nombre}">			
				<p:column headerText="Nombre" filterBy="#{iniciativa.nombre}" sortBy="#{iniciativa.nombre}">
					<h:outputText value="#{iniciativa.nombre}"  />
				</p:column>
				
				<p:column headerText="Nombre proponente" filterBy="#{null}" sortBy="#{null}">
					<h:outputText value=""  />
				</p:column>
				
				<p:column headerText="Usuario proponente" filterBy="#{iniciativa.usuario}" sortBy="#{iniciativa.usuario}">
					<h:outputText value="#{iniciativa.usuario}" />
				</p:column>
			 
				<p:column headerText="Descripcion" filterBy="#{iniciativa.descripcion}" sortBy="#{iniciativa.descripcion}">
					<h:outputText value="#{iniciativa.descripcion}" />
				</p:column>
			 
				<p:column headerText="Area" filterBy="#{iniciativa.area}" sortBy="#{iniciativa.area}">
					<h:outputText value="#{iniciativa.area}" />
				</p:column>
				
				<p:column headerText="Estado" filterBy="#{iniciativa.estado}" sortBy="#{iniciativa.estado}">
					<h:outputText value="#{iniciativa.estado}" />
				</p:column>
				
				<f:facet name="footer">
					<p:selectOneMenu id="act-estado">
						<f:selectItem itemLabel="Seleccione un estado" itemValue="" noSelectionOption="true" />
						<f:selectItems value="#{BancoPropuestasBean.estadosIniciativas}" />
					</p:selectOneMenu>
					<p:commandButton value="Actualizar estado" 
									style="background:#b80f22;color: #fff;text-shadow:none;box-shadow:none;margin-left: 10px;border:none;"/>
				</f:facet>
				
			</p:dataTable>          
        </h:form>   
	</body>
</html>

<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
	<h:head>
		<title>Banco de iniciativas ECI</title>
		<link href="assets/css/registrarrI.css" rel="stylesheet"/>
		<link  rel="icon"   href="assets/img/favicon.png" type="image/png" />
	</h:head>
	<body>
		<h:form>
		
			<div class="cabecera">
				<img src= "assets/img/cabecera.jpg"/>
			</div>
			<div class = "header">
			
				<ul class="nav">
					<li><a href="">Iniciativas</a>
						<ul>
							<li><a href="../faces/registrarIniciativa.xhtml">Registrar iniciativa</a></li>
							<li><a href="../faces/MisIniciativas.xhtml">Mis Iniciativas </a></li>
	
						</ul>
					</li>
					<li>
						<p:commandButton value="Cerrar sesión"
									class="btn btn-rose btn-simple btn-wd btn-lg"
									action="#{shiroBean.doLogOut()}"/>	
					</li>
				</ul>
			</div>
			<div class = "registrar-iniciativa" id="registrariniciativa">
				<p>REGISTRAR INICIATIVA</p>
				<img class="avatar" src= "assets/img/ideaico.png"/>
				<label>Nombre</label>
				<p:inputText id="nombrei" binding="#{nombrei}" class = "form-control" placeholder="Ingrese el nombre de la iniciativa"/>
				<label>Area o dependencia</label>		
				<p:selectOneMenu id="areabox" binding="#{areai}" class="areabox">
					<f:selectItem itemValue="" noSelectionOption="true" class="lblarea"/>
					<f:selectItems value="#{BancoPropuestasBean.areasIniciativas}" />
				</p:selectOneMenu>
				<label>Descripcion</label>
				<p:inputText id="descripcioni" binding="#{descripcioni}" class = "form-control" placeholder="Ingrese una descripción de la iniciativa"/>
			</div>
			<div class = "registrar-pclaves" id="registrarpclaves">
				<p:dataTable var="pclaves" value="#{BancoPropuestasBean.consultarPalabrasClaves()}" class="tabla" id="checkboxDT"
					paginator="true" paginatorPosition = "bottom" paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink}"
					rows="5" selection="#{BancoPropuestasBean.selectedPalabras}" rowKey="#{pclaves.palabraClave}">	
					
					<p:column selectionMode="multiple" style="width:16px;text-align:center"/>
					
					<p:column headerText="Palabras clave">
						<h:outputText value="#{pclaves.palabraClave}"/>
					</p:column>
				</p:dataTable>
				<p:outputLabel value="#{shiroBean.username}" binding="#{usuarioi}" style="visibility:hidden;"/>
				<label>Otra palabra clave</label>
				<p:inputText id="pclave" class = "form-control" placeholder="Ingrese una nueva palabra clave" binding="#{nuevapclave}"/>
				<p:commandButton value = "Agregar"  styleClass="btn btn-success" class="btn-agregar" 
					actionListener="#{BancoPropuestasBean.registrarPalabraClave(nuevapclave.value)}"/>			
				<p:commandButton value = "Registrar iniciativa"  styleClass="btn btn-success" class="btn"
					actionListener="#{BancoPropuestasBean.registrarIniciativa(nombrei.value, descripcioni.value, areai.value, usuarioi.value)}"/>
					<p:messages id="messages" closable="true">
        			<p:autoUpdate />
   					 </p:messages>				
			</div>
		</h:form>
	</body>

</html>
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="edu.eci.cvds.persistence.mybatisimpl.mappers.UsuarioMapper">
	<resultMap type='Usuario' id='UsuarioResult'>
	    <id property='correo' column='correo'/>
		<result property='id' column='id'/>
	    <result property='tid' column='tid'/>
	    <result property='nombre' column='nombre'/>
		<result property='telefono' column='telefono'/>
		<result property='estado' column='estado'/>
		<association property='rol' javaType='Rol' resultMap='edu.eci.cvds.persistence.mybatisimpl.mappers.UsuarioMapper.RolResult'></association>
		<result property='clave' column='clave'/>		
	</resultMap>

    
	<resultMap type='Rol' id='RolResult'>     
        <result property='rol' column='rol'/>
    </resultMap>
	
	<select parameterType="map" id="consultarUsuarios" resultMap="UsuarioResult">
		select 
		nombre,
		id,
		tid,
		correo,
		estado,
		telefono,
		rol,
		FROM usuario;
	</select>
	
	<select parameterType="map" id="consultarUsuario" resultMap="UsuarioResult">
		SELECT
		u.id,
		u.tid,
		u.nombre,
		u.correo,
		u.telefono,
		u.estado,
		u.rol,
		FROM 
		usuario as u 
		WHERE u.id = #{id}
	</select>
	
	<select id="consultarUsuarioLog" resultMap="UsuarioResult">
		SELECT
		u.id,
		u.tid,
		u.nombre,
		u.correo,
		u.telefono,
		u.estado,
		u.clave,
		u.rol,
		FROM 
		usuario as u 
		WHERE u.id = #{id} and u.clave = #{claveU}
	</select>
	
</mapper>
	